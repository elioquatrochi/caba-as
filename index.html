<!DOCTYPE html>
<html lang="es-AR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Caba√±as Sol y Luna. Consult√° disponibilidad y reserv√° tu estad√≠a con atenci√≥n personalizada." />
  <title>Caba√±as Sol y Luna</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

  <!-- Swiper -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />

  <!-- CSS -->
  <link rel="stylesheet" href="css.css" />
</head>

<body>
  <!-- Header -->
  <header class="header" id="header">
    <nav class="nav" aria-label="Navegaci√≥n principal">
      <a href="#hero" class="logo" aria-label="Inicio Caba√±as Sol y Luna">
        <img src="img/logo-solyluna.svg" alt="Caba√±as Sol y Luna" />
      </a>

      <!-- Desktop links -->
      <ul class="nav-links" id="navLinks">
        <li><a href="#propiedades">Caba√±as</a></li>
        <li><a href="#porque">¬øPor qu√© elegirnos?</a></li>
        <li><a href="#servicios">Servicios</a></li>
        <li><a href="#calificaciones">Calificaciones</a></li>
        <li><a href="#contacto">Contacto</a></li>
      </ul>

      <!-- Bot√≥n men√∫ mobile -->
      <div class="nav-actions">
        <button class="mobile-nav-toggle" id="mobileNavToggle"
          aria-label="Abrir men√∫" aria-expanded="false" aria-controls="mobileMenu" type="button">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </nav>

    <!-- Men√∫ mobile -->
    <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
      <ul>
        <li><a href="#propiedades" class="mobile-link">Caba√±as</a></li>
        <li><a href="#porque" class="mobile-link">¬øPor qu√© elegirnos?</a></li>
        <li><a href="#servicios" class="mobile-link">Servicios</a></li>
        <li><a href="#calificaciones" class="mobile-link">Calificaciones</a></li>
        <li><a href="#contacto" class="mobile-link">Contacto</a></li>
        <li><a href="#buscador" class="mobile-link cta-link">Consultar disponibilidad</a></li>
      </ul>
    </div>
  </header>

  <main>
    <!-- Hero -->
    <section class="hero" id="hero">
      <video class="hero-video" autoplay muted loop playsinline poster="img/foto1.jpg">
        <source src="img/hero.mp4" type="video/mp4" />
        <source src="https://cdn.coverr.co/videos/coverr-aerial-view-of-a-forest-covered-in-fog-6239/1080p.mp4" type="video/mp4" />
        Tu navegador no soporta video.
      </video>

      <div class="hero-content">
        <h1>Tu descanso en Caba√±as Sol y Luna</h1>
        <p>Atenci√≥n personalizada, comodidad y un lugar pensado para disfrutar de verdad.</p>

        <div class="search-box" id="buscador">
          <form class="search-form" id="searchForm" aria-label="Consultar disponibilidad">
            <div class="search-group">
              <label for="checkin">Ingreso</label>
              <input type="date" id="checkin" name="checkin" required />
            </div>

            <div class="search-group">
              <label for="checkout">Salida</label>
              <input type="date" id="checkout" name="checkout" required />
            </div>

            <div class="search-group">
              <label for="guests">Personas</label>
              <select id="guests" name="guests" required>
                <option value="">Seleccion√°</option>
                <option value="2">2 personas</option>
                <option value="4">4 personas</option>
                <option value="6">6 personas</option>
                <option value="8">8 personas</option>
                <option value="10">10 personas</option>
                <option value="12">12 personas</option>
              </select>
            </div>

            <button type="submit" class="search-submit">CONSULTAR DISPONIBILIDAD</button>

            <p class="search-hint">
              Al enviar, se arma un mensaje para WhatsApp con tu consulta. La reserva se confirma cuando te respondamos.
            </p>
          </form>
        </div>
      </div>
    </section>

    <!-- Propiedades -->
    <section id="propiedades" class="section section--no-divider" aria-label="Caba√±as disponibles">
      <div class="container-wide">
        <div class="section-header">
          <h2>Nuestras caba√±as</h2>
          <p>Eleg√≠ una opci√≥n y mir√° las fotos.</p>
        </div>

        <div class="properties-grid">
          <!-- Caba√±a 1 -->
          <article class="property-card">
            <img class="property-image" src="img/foto1.jpg" alt="Caba√±a 1" loading="lazy" decoding="async">
            <div class="property-content">
              <h3 class="property-title">Caba√±a 1</h3>
              <div class="property-location">Caba√±as Sol y Luna</div>
              <div class="property-features">üõè 2 dorm. ¬∑ üõÅ 1 ba√±o ¬∑ üë• 6 pers.</div>
              <div class="property-price">
                <span class="price-amount">Consultar</span>
                <button class="view-button" type="button" data-open-lightbox="c1">Ver Fotos</button>
              </div>
            </div>
          </article>

          <!-- Caba√±a 2 -->
          <article class="property-card">
            <img class="property-image" src="img/foto5.jpg" alt="Caba√±a 2" loading="lazy" decoding="async">
            <div class="property-content">
              <h3 class="property-title">Caba√±a 2</h3>
              <div class="property-location">Caba√±as Sol y Luna</div>
              <div class="property-features">üõè 1 dorm. ¬∑ üõÅ 1 ba√±o ¬∑ üë• 4 pers.</div>
              <div class="property-price">
                <span class="price-amount">Consultar</span>
                <button class="view-button" type="button" data-open-lightbox="c2">Ver Fotos</button>
              </div>
            </div>
          </article>

          <!-- Caba√±a 3 -->
          <article class="property-card">
            <img class="property-image" src="img/foto9.jpg" alt="Caba√±a 3" loading="lazy" decoding="async">
            <div class="property-content">
              <h3 class="property-title">Caba√±a 3</h3>
              <div class="property-location">Caba√±as Sol y Luna</div>
              <div class="property-features">üõè 3 dorm. ¬∑ üõÅ 2 ba√±os ¬∑ üë• 10 pers.</div>
              <div class="property-price">
                <span class="price-amount">Consultar</span>
                <button class="view-button" type="button" data-open-lightbox="c3">Ver Fotos</button>
              </div>
            </div>
          </article>
        </div>
      </div>
    </section>

    <!-- Separador suave -->
    <div class="sep-soft" aria-hidden="true"></div>

    <!-- ¬øPor qu√© elegirnos? -->
    <section class="why section" id="porque">
      <div class="container-wide">
        <div class="section-header">
          <h2>¬øPor qu√© elegirnos?</h2>
          <p>Un espacio pensado para descansar y disfrutar con total comodidad.</p>
        </div>

        <div class="why-grid">
          <div class="why-collage" aria-label="Fotos del complejo">
            <figure class="collage-item collage-item--big">
              <img src="img/foto10.jpg" alt="Foto principal" loading="lazy" decoding="async">
            </figure>
            <figure class="collage-item collage-item--small1">
              <img src="img/foto11.jpg" alt="Foto 2" loading="lazy" decoding="async">
            </figure>
            <figure class="collage-item collage-item--small2">
              <img src="img/foto12.jpg" alt="Foto 3" loading="lazy" decoding="async">
            </figure>
            <figure class="collage-item collage-item--small3">
              <img src="img/foto13.jpg" alt="Foto 4" loading="lazy" decoding="async">
            </figure>
          </div>

          <div class="why-content">
            <p class="why-lead">
              <strong>Caba√±as Sol y Luna</strong> es un espacio pensado para descansar y disfrutar con total comodidad.
            </p>

            <div class="why-cards">
              <article class="why-card">
                <div class="why-icon"><i class="fas fa-house"></i></div>
                <div>
                  <h3>Comodidad real</h3>
                  <p>Ambientes amplios, equipamiento completo y una experiencia simple, sin vueltas.</p>
                </div>
              </article>

              <article class="why-card">
                <div class="why-icon"><i class="fas fa-wifi"></i></div>
                <div>
                  <h3>Servicios incluidos</h3>
                  <p>Wi-Fi, cocina equipada y detalles que hacen la diferencia en una estad√≠a c√≥moda.</p>
                </div>
              </article>

              <article class="why-card">
                <div class="why-icon"><i class="fas fa-heart"></i></div>
                <div>
                  <h3>Atenci√≥n personalizada</h3>
                  <p>Respondemos r√°pido por WhatsApp y te ayudamos a elegir la mejor opci√≥n.</p>
                </div>
              </article>
            </div>

            <div class="why-actions">
              <a class="btn-primary" href="#buscador">Consultar disponibilidad</a>
              <a class="btn-outline" href="#servicios">Ver servicios</a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Separador suave -->
    <div class="sep-soft" aria-hidden="true"></div>

    <!-- Servicios -->
    <section class="services section" id="servicios" aria-label="Servicios">
      <div class="container">
        <div class="section-header">
          <h2>Servicios</h2>
          <p>Todo lo necesario para una estad√≠a c√≥moda.</p>
        </div>

        <div class="services-grid">
          <ul class="services-list">
            <li><i class="fas fa-wifi"></i> Wi-Fi</li>
            <li><i class="fas fa-tv"></i> TV</li>
            <li><i class="fas fa-fire"></i> Calefacci√≥n / salamandra (seg√∫n unidad)</li>
            <li><i class="fas fa-kitchen-set"></i> Cocina equipada</li>
            <li><i class="fas fa-microwave"></i> Microondas</li>
            <li><i class="fas fa-bed"></i> Ropa blanca (consultar)</li>
          </ul>

          <ul class="services-list">
            <li><i class="fas fa-car"></i> Cochera (seg√∫n disponibilidad)</li>
            <li><i class="fas fa-baby"></i> Cunas (consultar)</li>
            <li><i class="fas fa-umbrella-beach"></i> Reposeras</li>
            <li><i class="fas fa-fire-burner"></i> Asador (seg√∫n unidad)</li>
            <li><i class="fas fa-sparkles"></i> Limpieza (consultar)</li>
            <li><i class="fas fa-star"></i> Atenci√≥n personalizada</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- Separador suave -->
    <div class="sep-soft" aria-hidden="true"></div>

    <!-- Calificaciones -->
    <section class="ratings section" id="calificaciones" aria-label="Calificaciones">
      <div class="container">
        <div class="section-header">
          <h2>Calificaciones</h2>
          <p>Opiniones de hu√©spedes.</p>
        </div>

        <div class="ratings-grid">
          <div class="rating-item">
            <div class="rating-badge rating-badge--blue" aria-hidden="true">
              <i class="fas fa-star"></i>
            </div>
            <div class="rating-number counter" data-target="9.0" data-decimals="1">0.0</div>
            <div class="rating-label">Excelente</div>
          </div>

          <div class="rating-item">
            <div class="rating-badge rating-badge--green" aria-hidden="true">
              <i class="fas fa-star"></i>
            </div>
            <div class="rating-number counter" data-target="4.7" data-decimals="1">0.0</div>
            <div class="rating-label">Muy bueno</div>
          </div>

          <div class="rating-item">
            <div class="rating-badge rating-badge--orange" aria-hidden="true">
              <i class="fas fa-star"></i>
            </div>
            <div class="rating-number counter" data-target="4.5" data-decimals="1">0.0</div>
            <div class="rating-label">Recomendado</div>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA final -->
    <section class="cta-final" id="contacto">
      <div class="cta-final-container">
        <div class="cta-final-text">
          <h2>¬øQuer√©s consultar?</h2>
          <p>Escribinos por WhatsApp y te respondemos con disponibilidad y opciones.</p>

          <div class="cta-final-actions">
            <a href="https://wa.me/5493512692064" target="_blank" class="cta-wsp" rel="noopener">
              <i class="fab fa-whatsapp"></i>
              WhatsApp
            </a>

            <a href="#buscador" class="cta-form">
              <i class="fas fa-calendar-check"></i>
              Consultar disponibilidad
            </a>
          </div>

          <div class="cta-final-extra">
            <span><strong>Horario:</strong> 09:00 a 20:00</span><br />
            <span><strong>Caba√±as Sol y Luna</strong></span>
          </div>
        </div>

        <div class="cta-final-box">
          <h4>Datos</h4>

          <ul>
            <li><i class="fas fa-phone"></i> +54 9 3512 692064</li>
            <li><i class="fas fa-envelope"></i> reservas@tus-cabanas.com</li>
            <li><i class="fas fa-location-dot"></i> Caba√±as Sol y Luna</li>
          </ul>

          <p class="cta-tip">Tip: envi√° fecha + cantidad de personas y te pasamos opciones.</p>
        </div>
      </div>
    </section>

    <!-- Separadores oscuros -->
    <div class="sep-dark" aria-hidden="true"></div>

    <!-- Video -->
    <section class="tour-video" aria-label="Video">
      <div class="container">
        <div class="section-header section-header--light">
          <h2>Video</h2>
          <p>Un vistazo r√°pido de Caba√±as Sol y Luna.</p>
        </div>

        <div class="video-card">
          <div class="video-frame">
            <video id="tourVideo" class="tour-video-player" controls playsinline preload="metadata" poster="img/foto1.jpg">
              <source src="/img/video1.mp4" type="video/mp4" />
              Tu navegador no soporta video.
            </video>
          </div>

          <div class="video-note">Tip: toc√° ‚Äúplay‚Äù para ver el recorrido.</div>
        </div>
      </div>
    </section>

    <div class="sep-dark" aria-hidden="true"></div>

    <!-- Ubicaci√≥n -->
    <section class="location" aria-label="Ubicaci√≥n">
      <div class="container">
        <div class="section-header section-header--light">
          <h2>Ubicaci√≥n</h2>
          <p>Potrero de Garay, C√≥rdoba.</p>
        </div>

        <div class="location-grid">
          <div class="location-info">
            <h3>Potrero de Garay, C√≥rdoba</h3>
            <p>
              Estamos en <strong>Caba√±as Sol y Luna</strong>. Coordin√° tu llegada por WhatsApp y te pasamos referencias.
            </p>

            <ul class="location-list">
              <li><i class="fas fa-location-dot"></i> Potrero de Garay, C√≥rdoba</li>
              <li><i class="fas fa-phone"></i> +54 9 3512 692064</li>
              <li><i class="fab fa-whatsapp"></i> WhatsApp: 5493512692064</li>
            </ul>

            <a class="btn-primary" href="https://wa.me/5493512692064" target="_blank" rel="noopener">
              Consultar por WhatsApp
            </a>
          </div>

          <div class="location-map" aria-label="Mapa">
            <iframe
              title="Mapa - Potrero de Garay, C√≥rdoba"
              loading="lazy"
              referrerpolicy="no-referrer-when-downgrade"
              allowfullscreen
              src="https://www.google.com/maps?q=Potrero%20de%20Garay%2C%20C%C3%B3rdoba&output=embed">
            </iframe>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="footer-content container">
      <div class="footer-section">
        <h3>Caba√±as Sol y Luna</h3>
        <p>Atenci√≥n personalizada todo el a√±o. Consult√° por fechas y promos.</p>
      </div>

      <div class="footer-section">
        <h3>Accesos</h3>
        <ul class="footer-links">
          <li><a href="#propiedades">Caba√±as</a></li>
          <li><a href="#porque">¬øPor qu√© elegirnos?</a></li>
          <li><a href="#servicios">Servicios</a></li>
          <li><a href="#calificaciones">Calificaciones</a></li>
        </ul>
      </div>

      <div class="footer-section">
        <h3>Contacto</h3>
        <ul class="footer-links">
          <li><a href="tel:+5493512692064"><i class="fas fa-phone"></i> +54 9 3512 692064</a></li>
          <li><a href="mailto:reservas@tus-cabanas.com"><i class="fas fa-envelope"></i> reservas@tus-cabanas.com</a></li>
          <li><span><i class="fas fa-location-dot"></i> Caba√±as Sol y Luna</span></li>
        </ul>
      </div>

      <div class="footer-section">
        <h3>Redes</h3>
        <ul class="footer-links">
          <li class="social"><a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i> Instagram</a></li>
          <li class="social"><a href="#" aria-label="Facebook"><i class="fab fa-facebook"></i> Facebook</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-bottom container">
      <p>&copy; 2025 Caba√±as Sol y Luna. Todos los derechos reservados.</p>
    </div>
  </footer>

  <!-- Scroll top -->
  <button class="scroll-to-top" id="scrollToTop" aria-label="Volver arriba" type="button">
    <i class="fas fa-arrow-up"></i>
  </button>

  <!-- WhatsApp flotante -->
  <a class="wsp-float" id="wspFloat"
     href="https://wa.me/5493512692064" target="_blank"
     aria-label="Abrir WhatsApp para consultar" rel="noopener">
    <i class="fab fa-whatsapp"></i>
  </a>

  <!-- LIGHTBOX (Swiper) -->
  <div class="lightbox" id="lightbox" aria-hidden="true" role="dialog" aria-label="Galer√≠a de fotos">
    <button class="close-lightbox" type="button" aria-label="Cerrar galer√≠a" id="closeLightboxBtn">‚úñ</button>

    <div class="swiper lightbox-swiper" id="lightboxSwiper" aria-label="Carrusel de fotos">
      <div class="swiper-wrapper" id="lightbox-swiper-wrapper"></div>
      <div class="swiper-pagination"></div>
      <div class="swiper-button-prev" aria-label="Anterior"></div>
      <div class="swiper-button-next" aria-label="Siguiente"></div>
    </div>
  </div>

  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      /* =========================
         CONFIG WHATSAPP + FECHAS
         ========================= */
      const WHATSAPP_NUMBER = "5493512692064";

      function toISODate(d) {
        const pad = (n) => String(n).padStart(2, "0");
        return `${d.getFullYear()}-${pad(d.getMonth() + 1)}-${pad(d.getDate())}`;
      }

      const checkin = document.getElementById("checkin");
      const checkout = document.getElementById("checkout");

      const today = new Date();
      const todayISO = toISODate(today);

      if (checkin) checkin.min = todayISO;
      if (checkout) checkout.min = todayISO;

      if (checkin && checkout) {
        checkin.addEventListener("change", () => {
          if (!checkin.value) return;
          const inDate = new Date(checkin.value + "T00:00:00");
          const minOut = new Date(inDate);
          minOut.setDate(minOut.getDate() + 1);
          const minOutISO = toISODate(minOut);
          checkout.min = minOutISO;

          if (!checkout.value || checkout.value < minOutISO) {
            checkout.value = minOutISO;
          }
        });
      }

      /* =========================
         FORM -> WhatsApp
         ========================= */
      const searchForm = document.getElementById("searchForm");
      if (searchForm) {
        searchForm.addEventListener("submit", (e) => {
          e.preventDefault();

          const guests = document.getElementById("guests")?.value || "";
          const inVal = checkin?.value || "";
          const outVal = checkout?.value || "";

          const msg =
            `Hola! Quisiera consultar disponibilidad en Caba√±as Sol y Luna.\n` +
            `Ingreso: ${inVal}\n` +
            `Salida: ${outVal}\n` +
            `Personas: ${guests}\n`;

          const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${encodeURIComponent(msg)}`;
          window.open(url, "_blank", "noopener");
        });
      }

      /* =========================
         NAV MOBILE
         ========================= */
      const mobileNavToggle = document.getElementById("mobileNavToggle");
      const mobileMenu = document.getElementById("mobileMenu");

      function setMobileMenu(open) {
        if (!mobileMenu || !mobileNavToggle) return;
        mobileMenu.classList.toggle("active", open);
        mobileMenu.setAttribute("aria-hidden", String(!open));
        mobileNavToggle.setAttribute("aria-expanded", String(open));
        document.body.classList.toggle("no-scroll", open);
      }

      if (mobileNavToggle) {
        mobileNavToggle.addEventListener("click", () => {
          const open = !mobileMenu?.classList.contains("active");
          setMobileMenu(open);
        });
      }

      document.querySelectorAll(".mobile-link").forEach(a => {
        a.addEventListener("click", () => setMobileMenu(false));
      });

      window.addEventListener("resize", () => {
        if (window.innerWidth >= 901) setMobileMenu(false);
      });

      /* =========================
         SCROLL TOP
         ========================= */
      const scrollBtn = document.getElementById("scrollToTop");
      window.addEventListener("scroll", () => {
        if (!scrollBtn) return;
        scrollBtn.classList.toggle("visible", window.scrollY > 600);
      });
      if (scrollBtn) {
        scrollBtn.addEventListener("click", () => window.scrollTo({ top: 0, behavior: "smooth" }));
      }

      /* =========================
         COUNTERS (Calificaciones)
         ========================= */
      const counters = document.querySelectorAll(".counter");
      const counterObserver = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (!entry.isIntersecting) return;
          const el = entry.target;
          const target = parseFloat(el.dataset.target || "0");
          const decimals = parseInt(el.dataset.decimals || "0", 10);
          const duration = 900;
          const start = performance.now();

          function tick(t) {
            const p = Math.min(1, (t - start) / duration);
            const val = target * p;
            el.textContent = val.toFixed(decimals);
            if (p < 1) requestAnimationFrame(tick);
          }
          requestAnimationFrame(tick);
          counterObserver.unobserve(el);
        });
      }, { threshold: 0.35 });

      counters.forEach(c => counterObserver.observe(c));

      /* =========================
         LIGHTBOX (Swiper) - cierre X garantizado
         ========================= */
      const cabinImages = {
        c1: ["img/foto1.jpg","img/foto2.jpg","img/foto3.jpg","img/foto4.jpg"],
        c2: ["img/foto5.jpg","img/foto6.jpg","img/foto7.jpg","img/foto8.jpg"],
        c3: ["img/foto9.jpg","img/foto10.jpg","img/foto11.jpg","img/foto12.jpg"]
      };

      let lightboxSwiper = null;

      const lb = document.getElementById("lightbox");
      const wrapper = document.getElementById("lightbox-swiper-wrapper");
      const closeBtn = document.getElementById("closeLightboxBtn");
      const swiperEl = document.getElementById("lightboxSwiper");

      function openLightbox(cabinKey) {
        const key = (cabinKey && cabinImages[cabinKey]) ? cabinKey : "c1";
        if (!lb || !wrapper || !swiperEl) return;

        wrapper.innerHTML = "";

        cabinImages[key].forEach((src, idx) => {
          const slide = document.createElement("div");
          slide.className = "swiper-slide";
          slide.innerHTML = `
            <img src="${src}" alt="Foto ${idx + 1}" loading="eager" decoding="async" />
          `;
          wrapper.appendChild(slide);
        });

        lb.classList.add("active");
        lb.setAttribute("aria-hidden", "false");
        document.body.classList.add("no-scroll");

        if (lightboxSwiper) {
          lightboxSwiper.destroy(true, true);
          lightboxSwiper = null;
        }

        // Inicializa Swiper luego de mostrar (evita bugs de layout)
        requestAnimationFrame(() => {
          lightboxSwiper = new Swiper(swiperEl, {
            loop: false,
            rewind: true,
            slidesPerView: 1,
            spaceBetween: 0,
            watchOverflow: true,
            observer: true,
            observeParents: true,
            pagination: { el: lb.querySelector(".swiper-pagination"), clickable: true },
            navigation: { nextEl: lb.querySelector(".swiper-button-next"), prevEl: lb.querySelector(".swiper-button-prev") },
            keyboard: { enabled: true },
            touchStartPreventDefault: false
          });
          lightboxSwiper.update();
        });

        if (closeBtn) closeBtn.focus({ preventScroll: true });
      }

      function closeLightbox() {
        if (!lb) return;

        lb.classList.remove("active");
        lb.setAttribute("aria-hidden", "true");
        document.body.classList.remove("no-scroll");

        if (lightboxSwiper) {
          lightboxSwiper.destroy(true, true);
          lightboxSwiper = null;
        }

        // Limpia slides para evitar que quede ‚Äúpegada‚Äù la anterior
        if (wrapper) wrapper.innerHTML = "";
      }

      // Abrir lightbox
      document.querySelectorAll("[data-open-lightbox]").forEach(btn => {
        btn.addEventListener("click", () => openLightbox(btn.getAttribute("data-open-lightbox")));
      });

      // Cierre: capturamos el evento para ganarle a Swiper (PC y m√≥vil)
      document.addEventListener("pointerdown", (e) => {
        const hitClose = e.target.closest("#closeLightboxBtn");
        if (hitClose) {
          e.preventDefault();
          e.stopPropagation();
          closeLightbox();
        }
      }, true);

      document.addEventListener("click", (e) => {
        // clic afuera: cierra
        if (e.target === lb) closeLightbox();
      }, true);

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") closeLightbox();
      });
    });
  </script>
</body>
</html>
